# å¤šç³»ç»Ÿæƒé™ç®¡ç†äº¤äº’è®¾è®¡æ–¹æ¡ˆ

## 1. æ¶æ„æ¦‚è¿°

### 1.1 ç³»ç»Ÿè§’è‰²åˆ’åˆ†

- **ç”¨æˆ·ä¸­å¿ƒ**ï¼šèº«ä»½è®¤è¯ + åŸºç¡€ç”¨æˆ·ä¿¡æ¯ç®¡ç†
- **æƒé™ç®¡ç†ç³»ç»Ÿ**ï¼šå„ç³»ç»Ÿçš„èœå•ã€æƒé™ã€è§’è‰²é…ç½®ç®¡ç†
- **ä¸šåŠ¡ç³»ç»Ÿ A/B/C**ï¼šæ¶ˆè´¹ç”¨æˆ·èº«ä»½ + æƒé™ä¿¡æ¯

### 1.2 æ ¸å¿ƒè®¾è®¡ç†å¿µ

- **èº«ä»½ç»Ÿä¸€**ï¼šç”¨æˆ·ä¿¡æ¯åœ¨ç”¨æˆ·ä¸­å¿ƒç»Ÿä¸€ç®¡ç†
- **æƒé™éš”ç¦»**ï¼šå„ç³»ç»Ÿæƒé™ç‹¬ç«‹é…ç½®ï¼Œäº’ä¸å½±å“
- **å•ç‚¹ç™»å½•**ï¼šä¸€æ¬¡ç™»å½•ï¼Œå¤šç³»ç»Ÿè®¿é—®
- **ç²¾ç»†æ§åˆ¶**ï¼šå¯ä»¥ç²¾ç¡®æ§åˆ¶ç”¨æˆ·åœ¨å„ç³»ç»Ÿçš„æƒé™

### 1.3 æ•°æ®æ¨¡å‹

```typescript
// å…¨å±€ç”¨æˆ· - å­˜å‚¨åœ¨ç”¨æˆ·ä¸­å¿ƒ
interface GlobalUser {
  id: string;
  username: string;
  email: string;
  phone: string;
  avatar: string;
  status: "active" | "inactive";
}

// ç”¨æˆ·ç³»ç»Ÿæƒé™å…³ç³» - å­˜å‚¨åœ¨æƒé™ç®¡ç†ç³»ç»Ÿ
interface UserSystemAccess {
  userId: string; // å…³è”å…¨å±€ç”¨æˆ·
  systemCode: string; // ç³»ç»Ÿæ ‡è¯†
  roles: string[]; // è¯¥ç”¨æˆ·åœ¨æ­¤ç³»ç»Ÿçš„è§’è‰²IDåˆ—è¡¨
  status: "active" | "inactive";
  grantedAt: string;
  grantedBy: string;
  expiredAt?: string;
}

// ç³»ç»Ÿè§’è‰² - æŒ‰ç³»ç»Ÿéš”ç¦»
interface SystemRole {
  id: string;
  systemCode: string; // æ‰€å±ç³»ç»Ÿ
  name: string;
  description: string;
  permissions: string[]; // æƒé™ç åˆ—è¡¨
}

// ç³»ç»Ÿèœå• - æŒ‰ç³»ç»Ÿéš”ç¦»
interface SystemMenu {
  id: string;
  systemCode: string; // æ‰€å±ç³»ç»Ÿ
  parentId?: string;
  name: string;
  type: "M" | "V" | "A"; // ç›®å½•/èœå•/æŒ‰é’®
  url?: string;
  component?: string;
  icon?: string;
  sort: number;
  relatedPermissions: string[]; // å…³è”æƒé™
}

// ç³»ç»Ÿæƒé™ - æŒ‰ç³»ç»Ÿéš”ç¦»
interface SystemPermission {
  id: string;
  systemCode: string; // æ‰€å±ç³»ç»Ÿ
  code: string; // æƒé™ç¼–ç 
  name: string; // æƒé™åç§°
  type: "MENU" | "BUTTON" | "API"; // æƒé™ç±»å‹
  groupName?: string; // æƒé™åˆ†ç»„
  relatedMenuId?: string; // å…³è”èœå•
  apiPath?: string; // APIè·¯å¾„
}
```

## 2. èœå•ç®¡ç†ç•Œé¢è®¾è®¡

### 2.1 ä¸»ç•Œé¢å¸ƒå±€

```
èœå•ç®¡ç†
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç®¡ç†ç³»ç»Ÿ: [æƒé™ç®¡ç†ç³»ç»Ÿ â–¼]  [æ–°å¢èœå•]              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å·¦ä¾§èœå•æ ‘(1/3)    â”‚  å³ä¾§è¯¦æƒ…é¢æ¿(2/3)              â”‚
â”‚ â”œğŸ“ ç³»ç»Ÿç®¡ç†       â”‚  â”Œâ”€ èœå•è¯¦æƒ… â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚â”œğŸ“„ ç”¨æˆ·ç®¡ç†      â”‚  â”‚ åç§°: ç”¨æˆ·ç®¡ç†              â”‚ â”‚
â”‚ â”‚â”œğŸ“„ è§’è‰²ç®¡ç†      â”‚  â”‚ ç±»å‹: èœå•é¡µé¢              â”‚ â”‚
â”‚ â”‚â””ğŸ”˜ æƒé™ç®¡ç†      â”‚  â”‚ è·¯ç”±: /user/list           â”‚ â”‚
â”‚ â”œğŸ“ ä¸šåŠ¡åŠŸèƒ½       â”‚  â”‚ ç»„ä»¶: UserList.vue         â”‚ â”‚
â”‚ â”‚â””ğŸ“„ æ•°æ®ç»Ÿè®¡      â”‚  â”‚ å›¾æ ‡: UserOutlined         â”‚ â”‚
â”‚ â””ğŸ“ ç³»ç»Ÿè®¾ç½®       â”‚  â”‚ æ’åº: 100                  â”‚ â”‚
â”‚   â””ğŸ”˜ å‚æ•°é…ç½®     â”‚  â”‚ å…³è”æƒé™: (3ä¸ª)             â”‚ â”‚
â”‚                    â”‚  â”‚ â”Œâ”€ å…³è”æƒé™åˆ—è¡¨ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚                    â”‚  â”‚ â”‚ âœ“ user:list    æŸ¥çœ‹ç”¨æˆ· â”‚ â”‚ â”‚
â”‚                    â”‚  â”‚ â”‚ âœ“ user:create  æ–°å¢ç”¨æˆ· â”‚ â”‚ â”‚
â”‚                    â”‚  â”‚ â”‚ âœ“ user:edit    ç¼–è¾‘ç”¨æˆ· â”‚ â”‚ â”‚
â”‚                    â”‚  â”‚ â”‚ âœ“ user:delete  åˆ é™¤ç”¨æˆ· â”‚ â”‚ â”‚
â”‚                    â”‚  â”‚ â”‚ [+ æ·»åŠ æƒé™å…³è”]        â”‚ â”‚ â”‚
â”‚                    â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚                    â”‚  â”‚ [ç¼–è¾‘] [åˆ é™¤]              â”‚ â”‚
â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 äº¤äº’è¯´æ˜

- **ç³»ç»Ÿåˆ‡æ¢å™¨**ï¼šæ˜¾ç¤ºå½“å‰ç”¨æˆ·æœ‰ç®¡ç†æƒé™çš„ç³»ç»Ÿåˆ—è¡¨
- **èœå•æ ‘**ï¼šåªæ˜¾ç¤ºå½“å‰é€‰ä¸­ç³»ç»Ÿçš„èœå•ç»“æ„
- **å›¾æ ‡æ ‡è¯†**ï¼šğŸ“ ç›®å½•ã€ğŸ“„ èœå•ã€ğŸ”˜ æŒ‰é’®
- **æƒé™å…³è”**ï¼šæ˜¾ç¤ºèœå•å…³è”çš„æƒé™åˆ—è¡¨ï¼Œæ”¯æŒæ·»åŠ /åˆ é™¤

### 2.3 æ–°å¢/ç¼–è¾‘èœå•è¡¨å•

```
æ–°å¢èœå•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åŸºæœ¬ä¿¡æ¯                                â”‚
â”‚ æ‰€å±ç³»ç»Ÿ: [æƒé™ç®¡ç†ç³»ç»Ÿ] (ä¸å¯ç¼–è¾‘)      â”‚
â”‚ èœå•åç§°: [ç”¨æˆ·ç®¡ç†]                    â”‚
â”‚ èœå•ç±»å‹: âšªç›®å½• âš«èœå• âšªæŒ‰é’®           â”‚
â”‚ çˆ¶çº§èœå•: [ç³»ç»Ÿç®¡ç† â–¼]                  â”‚
â”‚ æ˜¾ç¤ºæ’åº: [100]                         â”‚
â”‚                                         â”‚
â”‚ è·¯ç”±ä¿¡æ¯ (èœå•ç±»å‹æ—¶æ˜¾ç¤º)                â”‚
â”‚ è·¯ç”±åœ°å€: [/user/list]                  â”‚
â”‚ ç»„ä»¶è·¯å¾„: [UserList.vue]                â”‚
â”‚ è·¯ç”±å‚æ•°: [queryå‚æ•°é…ç½®]                â”‚
â”‚                                         â”‚
â”‚ æ˜¾ç¤ºä¿¡æ¯                                â”‚
â”‚ èœå•å›¾æ ‡: [UserOutlined â–¼]              â”‚
â”‚ æ˜¯å¦ç¼“å­˜: â˜ å¼€å¯é¡µé¢ç¼“å­˜                â”‚
â”‚ æ˜¯å¦æ˜¾ç¤º: â˜‘ åœ¨èœå•ä¸­æ˜¾ç¤º                â”‚
â”‚                                         â”‚
â”‚ æƒé™å…³è”                                â”‚
â”‚ è‡ªåŠ¨ç”Ÿæˆæƒé™: â˜‘ ä¸ºæ­¤èœå•è‡ªåŠ¨ç”ŸæˆåŸºç¡€æƒé™  â”‚
â”‚ ç”Ÿæˆè§„åˆ™: â˜‘user:list â˜‘user:create      â”‚
â”‚          â˜‘user:edit â˜‘user:delete       â”‚
â”‚                                         â”‚
â”‚ [ç¡®å®š] [å–æ¶ˆ]                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.4 å…³é”®äº¤äº’é€»è¾‘

1. **æ‰€å±ç³»ç»Ÿ**ï¼šæ–°å¢æ—¶è‡ªåŠ¨è®¾ç½®ä¸ºå½“å‰é€‰ä¸­ç³»ç»Ÿï¼Œä¸å¯ä¿®æ”¹
2. **çˆ¶çº§èœå•**ï¼šä¸‹æ‹‰åˆ—è¡¨åªæ˜¾ç¤ºå½“å‰ç³»ç»Ÿçš„ç›®å½•å’Œèœå•
3. **è‡ªåŠ¨ç”Ÿæˆæƒé™**ï¼šå‹¾é€‰æ—¶æ ¹æ®èœå•ç±»å‹è‡ªåŠ¨ç”Ÿæˆæ ‡å‡†æƒé™ï¼ˆlist/create/edit/deleteï¼‰
4. **æƒé™å…³è”**ï¼šå¯ä»¥æ‰‹åŠ¨å…³è”å·²å­˜åœ¨çš„æƒé™ï¼Œæˆ–æ–°å»ºæƒé™

## 3. æƒé™ç®¡ç†ç•Œé¢è®¾è®¡

### 3.1 ä¸»ç•Œé¢å¸ƒå±€

```
æƒé™ç®¡ç†
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç®¡ç†ç³»ç»Ÿ: [æƒé™ç®¡ç†ç³»ç»Ÿ â–¼]  æƒé™ç±»å‹: [å…¨éƒ¨â–¼] [æ–°å¢æƒé™] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æƒé™åˆ—è¡¨ (æŒ‰èœå•åˆ†ç»„)                                â”‚
â”‚                                                     â”‚
â”‚ ğŸ“ ç³»ç»Ÿç®¡ç†                                         â”‚
â”‚   ğŸ“„ ç”¨æˆ·ç®¡ç†                                       â”‚
â”‚     ğŸ” user:list        æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨    [ç¼–è¾‘][åˆ é™¤] â”‚
â”‚     ğŸ” user:create      æ–°å¢ç”¨æˆ·        [ç¼–è¾‘][åˆ é™¤] â”‚
â”‚     ğŸ” user:edit        ç¼–è¾‘ç”¨æˆ·        [ç¼–è¾‘][åˆ é™¤] â”‚
â”‚     ğŸ” user:delete      åˆ é™¤ç”¨æˆ·        [ç¼–è¾‘][åˆ é™¤] â”‚
â”‚   ğŸ“„ è§’è‰²ç®¡ç†                                       â”‚
â”‚     ğŸ” role:list        æŸ¥çœ‹è§’è‰²åˆ—è¡¨    [ç¼–è¾‘][åˆ é™¤] â”‚
â”‚     ğŸ” role:create      æ–°å¢è§’è‰²        [ç¼–è¾‘][åˆ é™¤] â”‚
â”‚                                                     â”‚
â”‚ ğŸ“ APIæƒé™                                          â”‚
â”‚     ğŸ”— POST /api/user   åˆ›å»ºç”¨æˆ·API     [ç¼–è¾‘][åˆ é™¤] â”‚
â”‚     ğŸ”— GET /api/user    è·å–ç”¨æˆ·API     [ç¼–è¾‘][åˆ é™¤] â”‚
â”‚                                                     â”‚
â”‚ ğŸ“ è‡ªå®šä¹‰æƒé™                                       â”‚
â”‚     âš™ï¸  system:config   ç³»ç»Ÿé…ç½®        [ç¼–è¾‘][åˆ é™¤] â”‚
â”‚     âš™ï¸  data:export     æ•°æ®å¯¼å‡º        [ç¼–è¾‘][åˆ é™¤] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 æƒé™åˆ†ç»„æ˜¾ç¤º

- **æŒ‰èœå•åˆ†ç»„**ï¼šæ˜¾ç¤ºèœå•å…³è”çš„æƒé™
- **API æƒé™**ï¼šç‹¬ç«‹åˆ†ç»„æ˜¾ç¤º API æƒé™
- **è‡ªå®šä¹‰æƒé™**ï¼šä¸å…³è”èœå•çš„è‡ªå®šä¹‰æƒé™

### 3.3 æƒé™ç¼–è¾‘è¡¨å•

```
ç¼–è¾‘æƒé™
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åŸºæœ¬ä¿¡æ¯                                â”‚
â”‚ æ‰€å±ç³»ç»Ÿ: [æƒé™ç®¡ç†ç³»ç»Ÿ] (ä¸å¯ç¼–è¾‘)      â”‚
â”‚ æƒé™ç¼–ç : [user:edit]                   â”‚
â”‚ æƒé™åç§°: [ç¼–è¾‘ç”¨æˆ·]                    â”‚
â”‚ æƒé™ç±»å‹: âšªèœå•æƒé™ âš«æŒ‰é’®æƒé™ âšªAPIæƒé™ â”‚
â”‚ æƒé™åˆ†ç»„: [ç”¨æˆ·ç®¡ç† â–¼]                  â”‚
â”‚                                         â”‚
â”‚ å…³è”é…ç½®                                â”‚
â”‚ å…³è”èœå•: [ç”¨æˆ·ç®¡ç† â–¼] (èœå•æƒé™æ—¶)     â”‚
â”‚ APIè·¯å¾„:  [POST /api/user] (APIæƒé™æ—¶)  â”‚
â”‚ æŒ‰é’®æ ‡è¯†: [edit-btn] (æŒ‰é’®æƒé™æ—¶)       â”‚
â”‚                                         â”‚
â”‚ æƒé™æè¿°: [å…è®¸ç¼–è¾‘ç”¨æˆ·åŸºæœ¬ä¿¡æ¯]         â”‚
â”‚                                         â”‚
â”‚ [ç¡®å®š] [å–æ¶ˆ]                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 4. è§’è‰²æƒé™é…ç½®ç•Œé¢

### 4.1 è§’è‰²ç®¡ç†ä¸»ç•Œé¢

```
è§’è‰²ç®¡ç†
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç®¡ç†ç³»ç»Ÿ: [æƒé™ç®¡ç†ç³»ç»Ÿ â–¼]  [æ–°å¢è§’è‰²]              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è§’è‰²åˆ—è¡¨                                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ è¶…çº§ç®¡ç†å‘˜      ç³»ç»Ÿæœ€é«˜æƒé™    5äºº  [é…ç½®æƒé™]  â”‚ â”‚
â”‚ â”‚ ç”¨æˆ·ç®¡ç†å‘˜      ç®¡ç†ç”¨æˆ·å’Œè§’è‰²  12äºº [é…ç½®æƒé™]  â”‚ â”‚
â”‚ â”‚ å®¡è®¡å‘˜          æŸ¥çœ‹æ“ä½œæ—¥å¿—    3äºº  [é…ç½®æƒé™]  â”‚ â”‚
â”‚ â”‚ æ™®é€šç”¨æˆ·        åŸºç¡€æŸ¥çœ‹æƒé™    25äºº [é…ç½®æƒé™]  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 è§’è‰²æƒé™é…ç½®ç•Œé¢

```
è§’è‰²æƒé™é…ç½® > ç”¨æˆ·ç®¡ç†å‘˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è§’è‰²ä¿¡æ¯: ç”¨æˆ·ç®¡ç†å‘˜ (user-admin)                   â”‚
â”‚ æ‰€å±ç³»ç»Ÿ: æƒé™ç®¡ç†ç³»ç»Ÿ                              â”‚
â”‚ å½“å‰æˆå‘˜: 12äºº  [æŸ¥çœ‹æˆå‘˜åˆ—è¡¨]                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æƒé™é…ç½® (æ ‘å½¢ç»“æ„)                                 â”‚
â”‚                                                     â”‚
â”‚ â˜‘ ğŸ“ ç³»ç»Ÿç®¡ç†                    [å…¨é€‰] [å…¨ä¸é€‰]    â”‚
â”‚   â˜‘ ğŸ“„ ç”¨æˆ·ç®¡ç†                                     â”‚
â”‚     â˜‘ ğŸ” user:list      æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨                â”‚
â”‚     â˜‘ ğŸ” user:create    æ–°å¢ç”¨æˆ·                    â”‚
â”‚     â˜‘ ğŸ” user:edit      ç¼–è¾‘ç”¨æˆ·                    â”‚
â”‚     â˜‘ ğŸ” user:delete    åˆ é™¤ç”¨æˆ·                    â”‚
â”‚   â˜‘ ğŸ“„ è§’è‰²ç®¡ç†                                     â”‚
â”‚     â˜‘ ğŸ” role:list      æŸ¥çœ‹è§’è‰²åˆ—è¡¨                â”‚
â”‚     â˜‘ ğŸ” role:create    æ–°å¢è§’è‰²                    â”‚
â”‚     â˜‘ ğŸ” role:edit      ç¼–è¾‘è§’è‰²                    â”‚
â”‚     â˜ ğŸ” role:delete    åˆ é™¤è§’è‰²                    â”‚
â”‚                                                     â”‚
â”‚ â˜ ğŸ“ ç³»ç»Ÿè®¾ç½®            [å…¨é€‰] [å…¨ä¸é€‰]            â”‚
â”‚   â˜ ğŸ“„ å‚æ•°é…ç½®                                     â”‚
â”‚     â˜ ğŸ” config:view    æŸ¥çœ‹é…ç½®                    â”‚
â”‚     â˜ ğŸ” config:edit    ä¿®æ”¹é…ç½®                    â”‚
â”‚                                                     â”‚
â”‚ [ä¿å­˜é…ç½®] [å–æ¶ˆ]                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 äº¤äº’é€»è¾‘

- **æ ‘å½¢æƒé™**ï¼šæŒ‰èœå•å±‚çº§æ˜¾ç¤ºæƒé™ï¼Œæ”¯æŒçˆ¶å­è”åŠ¨
- **æ‰¹é‡æ“ä½œ**ï¼šæ”¯æŒæŒ‰åˆ†ç»„å…¨é€‰/å…¨ä¸é€‰
- **å®æ—¶é¢„è§ˆ**ï¼šé€‰æ‹©æƒé™åå®æ—¶è®¡ç®—è§’è‰²æƒé™èŒƒå›´
- **å†²çªæ£€æµ‹**ï¼šæ£€æµ‹æƒé™é…ç½®å†²çªå¹¶æç¤º

## 5. ç”¨æˆ·ç³»ç»Ÿæƒé™é…ç½®

### 5.1 ç”¨æˆ·è¯¦æƒ…ä¸­çš„ç³»ç»Ÿæƒé™ç®¡ç†

```
ç”¨æˆ·è¯¦æƒ… > å¼ ä¸‰ > ç³»ç»Ÿæƒé™
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”¨æˆ·ä¿¡æ¯: å¼ ä¸‰ (zhang@company.com)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç³»ç»Ÿæƒé™é…ç½®                                        â”‚
â”‚                                                     â”‚
â”‚ âœ… æƒé™ç®¡ç†ç³»ç»Ÿ                    [æƒé™è¯¦æƒ… â–¼]     â”‚
â”‚    å½“å‰è§’è‰²: [è¶…çº§ç®¡ç†å‘˜] [ç”¨æˆ·ç®¡ç†å‘˜]               â”‚
â”‚    æˆæƒçŠ¶æ€: æ­£å¸¸    æˆæƒæ—¶é—´: 2024-01-01           â”‚
â”‚    æƒé™è¯¦æƒ…: ç”¨æˆ·ç®¡ç†ã€è§’è‰²ç®¡ç†ã€èœå•é…ç½®...         â”‚
â”‚    [ç¼–è¾‘è§’è‰²] [æŸ¥çœ‹æƒé™æ˜ç»†] [ç§»é™¤æƒé™]             â”‚
â”‚                                                     â”‚
â”‚ âœ… ç”¨æˆ·ä¸­å¿ƒ                        [æƒé™è¯¦æƒ… â–¼]     â”‚
â”‚    å½“å‰è§’è‰²: [æ™®é€šç”¨æˆ·]                             â”‚
â”‚    æˆæƒçŠ¶æ€: æ­£å¸¸    æˆæƒæ—¶é—´: 2024-01-15           â”‚
â”‚    æƒé™è¯¦æƒ…: ä¸ªäººä¿¡æ¯æŸ¥çœ‹ã€å¯†ç ä¿®æ”¹                 â”‚
â”‚    [ç¼–è¾‘è§’è‰²] [æŸ¥çœ‹æƒé™æ˜ç»†] [ç§»é™¤æƒé™]             â”‚
â”‚                                                     â”‚
â”‚ âŒ ä¸šåŠ¡ç³»ç»ŸA                                        â”‚
â”‚    çŠ¶æ€: æœªæˆæƒ                                     â”‚
â”‚    [æˆæƒè®¿é—®]                                       â”‚
â”‚                                                     â”‚
â”‚ [+ æ·»åŠ ç³»ç»Ÿæƒé™]                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 ç”¨æˆ·è§’è‰²åˆ†é…å¼¹çª—

```
ä¸ºç”¨æˆ·åˆ†é…è§’è‰² - æƒé™ç®¡ç†ç³»ç»Ÿ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”¨æˆ·: å¼ ä¸‰ (zhang@company.com)          â”‚
â”‚ ç³»ç»Ÿ: æƒé™ç®¡ç†ç³»ç»Ÿ                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å¯é€‰è§’è‰²åˆ—è¡¨:                           â”‚
â”‚ â˜‘ è¶…çº§ç®¡ç†å‘˜    ç³»ç»Ÿæœ€é«˜æƒé™    [è¯¦æƒ…]   â”‚
â”‚ â˜‘ ç”¨æˆ·ç®¡ç†å‘˜    ç®¡ç†ç”¨æˆ·å’Œè§’è‰²  [è¯¦æƒ…]   â”‚
â”‚ â˜ å®¡è®¡å‘˜        æŸ¥çœ‹æ“ä½œæ—¥å¿—    [è¯¦æƒ…]   â”‚
â”‚ â˜ æ™®é€šç”¨æˆ·      åŸºç¡€æŸ¥çœ‹æƒé™    [è¯¦æƒ…]   â”‚
â”‚                                         â”‚
â”‚ æˆæƒæœŸé™:                               â”‚
â”‚ âš« æ°¸ä¹…æœ‰æ•ˆ                              â”‚
â”‚ âšª æŒ‡å®šæ—¶é—´: [2024-12-31] åˆ°æœŸ           â”‚
â”‚                                         â”‚
â”‚ æˆæƒè¯´æ˜: [ä¸´æ—¶æˆæƒå¤„ç†ç”¨æˆ·é—®é¢˜]         â”‚
â”‚                                         â”‚
â”‚ [ç¡®å®š] [å–æ¶ˆ]                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 6. æ ¸å¿ƒä¸šåŠ¡æµç¨‹

### 6.1 èœå•æƒé™å…³è”æµç¨‹

1. **åˆ›å»ºèœå•**æ—¶å¯é€‰æ‹©è‡ªåŠ¨ç”Ÿæˆæƒé™
2. **æƒé™ç”Ÿæˆè§„åˆ™**ï¼šæ ¹æ®èœå•ç±»å‹ç”Ÿæˆæ ‡å‡†æƒé™ï¼ˆlist/create/edit/deleteï¼‰
3. **æ‰‹åŠ¨å…³è”**ï¼šå¯åœ¨èœå•è¯¦æƒ…é¡µæ·»åŠ /åˆ é™¤æƒé™å…³è”
4. **æƒé™ç»§æ‰¿**ï¼šå­èœå•å¯ç»§æ‰¿çˆ¶èœå•çš„æƒé™è®¾ç½®

### 6.2 è§’è‰²æƒé™é…ç½®æµç¨‹

1. **åˆ›å»ºè§’è‰²**ï¼šè®¾ç½®è§’è‰²åŸºæœ¬ä¿¡æ¯
2. **é…ç½®æƒé™**ï¼šé€šè¿‡æ ‘å½¢ç•Œé¢å‹¾é€‰æƒé™
3. **æƒé™ç»§æ‰¿**ï¼šèœå•æƒé™è‡ªåŠ¨åŒ…å«å­æƒé™
4. **ä¿å­˜éªŒè¯**ï¼šæ£€æŸ¥æƒé™é…ç½®å®Œæ•´æ€§

### 6.3 ç”¨æˆ·æˆæƒæµç¨‹

1. **ç³»ç»Ÿæˆæƒ**ï¼šä¸ºç”¨æˆ·æˆæƒè®¿é—®æŸä¸ªç³»ç»Ÿ
2. **è§’è‰²åˆ†é…**ï¼šåœ¨å·²æˆæƒç³»ç»Ÿä¸­åˆ†é…è§’è‰²
3. **æƒé™éªŒè¯**ï¼šç™»å½•æ—¶éªŒè¯ç”¨æˆ·ç³»ç»Ÿæƒé™
4. **åŠ¨æ€æ›´æ–°**ï¼šæƒé™å˜æ›´å®æ—¶ç”Ÿæ•ˆ

### 6.4 æƒé™éªŒè¯æµç¨‹

```typescript
// å‰ç«¯æƒé™éªŒè¯
async function checkUserPermission(permissionCode: string): Promise<boolean> {
  const currentSystem = getCurrentSystem();
  const userToken = getAuthToken();

  const result = await permissionApi.verifyPermission({
    systemCode: currentSystem,
    permissionCode,
    token: userToken,
  });

  return result.hasPermission;
}

// åç«¯æƒé™éªŒè¯é€»è¾‘
async function verifyUserSystemPermission(
  userId: string,
  systemCode: string,
  permissionCode: string
): Promise<boolean> {
  // 1. è·å–ç”¨æˆ·åœ¨è¯¥ç³»ç»Ÿçš„è§’è‰²
  const userRoles = await getUserSystemRoles(userId, systemCode);
  if (!userRoles.length) return false;

  // 2. è·å–è§’è‰²çš„æƒé™é…ç½®
  const rolePermissions = await getRolePermissions(
    userRoles.map((r) => r.roleId)
  );

  // 3. æ£€æŸ¥æ˜¯å¦åŒ…å«æ‰€éœ€æƒé™
  return rolePermissions.some((rp) =>
    rp.permissions.some((p) => p.permissionId === permissionCode && p.granted)
  );
}
```

## 7. æŠ€æœ¯å®ç°è¦ç‚¹

### 7.1 æ•°æ®å­˜å‚¨ç­–ç•¥

- **ç”¨æˆ·åŸºç¡€ä¿¡æ¯**ï¼šå­˜å‚¨åœ¨ç”¨æˆ·ä¸­å¿ƒ
- **ç³»ç»Ÿæƒé™å…³ç³»**ï¼šå­˜å‚¨åœ¨æƒé™ç®¡ç†ç³»ç»Ÿ
- **æƒé™ç¼“å­˜**ï¼šRedis ç¼“å­˜ç”¨æˆ·æƒé™ä¿¡æ¯
- **æ“ä½œæ—¥å¿—**ï¼šè®°å½•æ‰€æœ‰æƒé™å˜æ›´æ“ä½œ

### 7.2 æ¥å£è®¾è®¡

```typescript
// èœå•ç®¡ç†æ¥å£
interface MenuAPI {
  getSystemMenuTree(systemCode: string): Promise<SystemMenu[]>;
  createMenu(menu: CreateMenuDto): Promise<SystemMenu>;
  updateMenu(menuId: string, menu: UpdateMenuDto): Promise<void>;
  deleteMenu(menuId: string): Promise<void>;
  getMenuPermissions(menuId: string): Promise<SystemPermission[]>;
  addMenuPermission(menuId: string, permissionId: string): Promise<void>;
  removeMenuPermission(menuId: string, permissionId: string): Promise<void>;
}

// æƒé™ç®¡ç†æ¥å£
interface PermissionAPI {
  getSystemPermissions(systemCode: string): Promise<SystemPermission[]>;
  createPermission(permission: CreatePermissionDto): Promise<SystemPermission>;
  updatePermission(
    permissionId: string,
    permission: UpdatePermissionDto
  ): Promise<void>;
  deletePermission(permissionId: string): Promise<void>;
  verifyPermission(
    params: VerifyPermissionDto
  ): Promise<{ hasPermission: boolean }>;
}

// è§’è‰²ç®¡ç†æ¥å£
interface RoleAPI {
  getSystemRoles(systemCode: string): Promise<SystemRole[]>;
  createRole(role: CreateRoleDto): Promise<SystemRole>;
  updateRole(roleId: string, role: UpdateRoleDto): Promise<void>;
  deleteRole(roleId: string): Promise<void>;
  getRolePermissions(roleId: string): Promise<string[]>;
  updateRolePermissions(roleId: string, permissions: string[]): Promise<void>;
}

// ç”¨æˆ·æƒé™ç®¡ç†æ¥å£
interface UserPermissionAPI {
  getUserSystemAccess(userId: string): Promise<UserSystemAccess[]>;
  grantUserSystemAccess(params: GrantSystemAccessDto): Promise<void>;
  updateUserSystemRoles(
    userId: string,
    systemCode: string,
    roleIds: string[]
  ): Promise<void>;
  revokeUserSystemAccess(userId: string, systemCode: string): Promise<void>;
}
```

### 7.3 å‰ç«¯çŠ¶æ€ç®¡ç†

```typescript
// æƒé™çŠ¶æ€ç®¡ç†
interface PermissionStore {
  currentSystem: string;
  userPermissions: Record<string, string[]>; // æŒ‰ç³»ç»Ÿå­˜å‚¨ç”¨æˆ·æƒé™
  systemMenus: Record<string, SystemMenu[]>; // æŒ‰ç³»ç»Ÿå­˜å‚¨èœå•

  // Actions
  switchSystem(systemCode: string): Promise<void>;
  loadUserPermissions(): Promise<void>;
  loadSystemMenus(systemCode: string): Promise<void>;
  checkPermission(permissionCode: string): boolean;
}
```

## 8. ç”¨æˆ·ä½“éªŒä¼˜åŒ–

### 8.1 çŠ¶æ€ä¿æŒ

- **ç³»ç»Ÿé€‰æ‹©è®°å¿†**ï¼šè®°ä½ç”¨æˆ·åœ¨å„æ¨¡å—çš„ç³»ç»Ÿé€‰æ‹©
- **å±•å¼€çŠ¶æ€ä¿æŒ**ï¼šåˆ‡æ¢ç³»ç»Ÿæ—¶ä¿æŒèœå•æ ‘å±•å¼€çŠ¶æ€
- **æ“ä½œå†å²**ï¼šæä¾›æ“ä½œæ’¤é”€åŠŸèƒ½

### 8.2 æ“ä½œåé¦ˆ

- **å®æ—¶éªŒè¯**ï¼šè¡¨å•è¾“å…¥å®æ—¶éªŒè¯
- **æ“ä½œç¡®è®¤**ï¼šé‡è¦æ“ä½œéœ€è¦äºŒæ¬¡ç¡®è®¤
- **è¿›åº¦æç¤º**ï¼šæ‰¹é‡æ“ä½œæ˜¾ç¤ºè¿›åº¦
- **é”™è¯¯å¤„ç†**ï¼šå‹å¥½çš„é”™è¯¯æç¤ºå’Œå¤„ç†å»ºè®®

### 8.3 æ€§èƒ½ä¼˜åŒ–

- **æ‡’åŠ è½½**ï¼šå¤§å‹æƒé™æ ‘åˆ†æ‰¹åŠ è½½
- **è™šæ‹Ÿæ»šåŠ¨**ï¼šå¤§é‡æ•°æ®åˆ—è¡¨ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨
- **æƒé™ç¼“å­˜**ï¼šç¼“å­˜ç”¨æˆ·æƒé™å‡å°‘æ¥å£è°ƒç”¨
- **å¢é‡æ›´æ–°**ï¼šæƒé™å˜æ›´å¢é‡åŒæ­¥

## 9. å®‰å…¨è€ƒè™‘

### 9.1 æƒé™éªŒè¯

- **åŒé‡éªŒè¯**ï¼šå‰ç«¯+åç«¯åŒé‡æƒé™éªŒè¯
- **å®æ—¶æ ¡éªŒ**ï¼šæ“ä½œæ—¶å®æ—¶éªŒè¯æƒé™
- **ä¼šè¯ç®¡ç†**ï¼šæƒé™å˜æ›´ååˆ·æ–°ç”¨æˆ·ä¼šè¯

### 9.2 æ“ä½œå®¡è®¡

- **æ“ä½œæ—¥å¿—**ï¼šè®°å½•æ‰€æœ‰æƒé™ç›¸å…³æ“ä½œ
- **å˜æ›´è¿½è¸ª**ï¼šè·Ÿè¸ªæƒé™é…ç½®å˜æ›´å†å²
- **å¼‚å¸¸ç›‘æ§**ï¼šç›‘æ§å¼‚å¸¸æƒé™æ“ä½œ

è¿™ä¸ªäº¤äº’è®¾è®¡æ–¹æ¡ˆæä¾›äº†å®Œæ•´çš„å¤šç³»ç»Ÿæƒé™ç®¡ç†è§£å†³æ–¹æ¡ˆï¼Œæ—¢ä¿è¯äº†ç³»ç»Ÿé—´çš„éš”ç¦»æ€§ï¼Œåˆæä¾›äº†ç»Ÿä¸€çš„ç®¡ç†ç•Œé¢ï¼Œèƒ½å¤Ÿæ»¡è¶³å¤æ‚çš„ä¼ä¸šçº§æƒé™ç®¡ç†éœ€æ±‚ã€‚
